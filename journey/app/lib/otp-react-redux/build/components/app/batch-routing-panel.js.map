{"version":3,"sources":["batch-routing-panel.js"],"names":["BatchRoutingPanel","Component","currentQuery","routingQuery","props","issues","push","length","window","alert","join","render","activeSearch","itineraryFooter","LegIcon","mobile","showUserSettings","actionText","display","justifyContent","flexDirection","alignItems","height","width","margin","marginRight","fontSize","textAlign","_planTrip","marginLeft","backgroundColor","position","top","right","left","bottom","mapStateToProps","state","ownProps","otp","expandAdvanced","user","mapDispatchToProps","apiActions"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Button } from 'react-bootstrap'\nimport { connect } from 'react-redux'\n\nimport * as apiActions from '../../actions/api'\nimport LocationField from '../form/connected-location-field'\nimport UserSettings from '../form/user-settings'\nimport Icon from '../narrative/icon'\nimport NarrativeItineraries from '../narrative/narrative-itineraries'\nimport { hasValidLocation, getActiveSearch, getShowUserSettings } from '../../util/state'\nimport ViewerContainer from '../viewers/viewer-container'\n\n/**\n * Main panel for the batch/trip comparison form.\n * @extends Component\n */\nclass BatchRoutingPanel extends Component {\n  _planTrip = () => {\n    const {currentQuery, routingQuery} = this.props\n    const issues = []\n    if (!hasValidLocation(currentQuery, 'from')) issues.push('from')\n    if (!hasValidLocation(currentQuery, 'to')) issues.push('to')\n    if (issues.length > 0) {\n      // TODO: replace with less obtrusive validation.\n      window.alert(`Please define the following fields to $_travel_$ ${issues.join(', ')}`)\n      return\n    }\n    routingQuery()\n  }\n\n  render () {\n    const {\n      activeSearch,\n      itineraryFooter,\n      LegIcon,\n      mobile,\n      showUserSettings\n    } = this.props\n    const actionText = mobile ? \"$_tap_$\" : \"$_click_$\"\n    return (\n      <ViewerContainer>\n        <LocationField\n          inputPlaceholder={`Inserisci partenza o ${actionText} su mappa...`}\n          locationType='from'\n          showClearButton\n        />\n        <LocationField\n          inputPlaceholder={`Inserisci destinazione o ${actionText} su mappa...`}\n          locationType='to'\n          showClearButton={!mobile}\n        />\n        <div style={{\n          display: 'flex',\n          justifyContent: 'flex-start',\n          flexDirection: 'row',\n          alignItems: 'center'\n        }} className='comparison-form'>\n          <button\n            style={{\n              height: '50px',\n              width: '50px',\n              margin: '0px',\n              marginRight: '5px'\n            }}\n          >\n            <Icon type='cog' className='fa-2x' />\n          </button>\n          <button\n            style={{\n              height: '50px',\n              width: '100px',\n              margin: '0px',\n              fontSize: 'small',\n              textAlign: 'left'\n            }}\n          >\n            <Icon type='calendar' /> Today<br />\n            <Icon type='clock-o' /> Now<br />\n          </button>\n          <Button\n            bsStyle='default'\n            bsSize='small'\n            onClick={this._planTrip}\n            style={{\n              height: '50px',\n              width: '50px',\n              margin: '0px',\n              marginLeft: 'auto',\n              backgroundColor: '#F5F5A7'\n            }} >\n            <Icon type='search' className='fa-2x' />\n          </Button>\n        </div>\n        {!activeSearch && showUserSettings &&\n          <UserSettings />\n        }\n        <div className='desktop-narrative-container'>\n          <NarrativeItineraries\n            containerStyle={{\n              display: 'flex',\n              flexDirection: 'column',\n              position: 'absolute',\n              top: '218px', // This is variable dependent on height of the form above.\n              right: '0',\n              left: '0',\n              bottom: '0'\n            }}\n            itineraryFooter={itineraryFooter}\n            LegIcon={LegIcon}\n          />\n        </div>\n      </ViewerContainer>\n    )\n  }\n}\n\n// connect to the redux store\nconst mapStateToProps = (state, ownProps) => {\n  const showUserSettings = getShowUserSettings(state.otp)\n  return {\n    activeSearch: getActiveSearch(state.otp),\n    currentQuery: state.otp.currentQuery,\n    expandAdvanced: state.otp.user.expandAdvanced,\n    showUserSettings\n  }\n}\n\nconst mapDispatchToProps = {\n  routingQuery: apiActions.routingQuery\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BatchRoutingPanel)\n"]}