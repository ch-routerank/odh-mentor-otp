{"version":3,"sources":["saved-trip-list.js"],"names":["SavedTripList","trips","accountLink","content","length","map","trip","index","mapStateToProps","state","ownProps","user","loggedInUserMonitoredTrips","mapDispatchToProps","TripListItem","Component","routeTo","props","id","createOrUpdateUserMonitoredTrip","newTrip","isActive","confirm","deleteUserMonitoredTrip","render","tripName","_handlePauseOrResumeMonitoring","_handleEditTrip","_handleDeleteTrip","itemMapStateToProps","itemMapDispatchToProps","userActions","uiActions","ConnectedTripListItem"],"mappings":"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","sourcesContent":["import clone from 'clone'\nimport React, { Component } from 'react'\nimport { Button, ButtonGroup, Glyphicon, Panel } from 'react-bootstrap'\nimport { connect } from 'react-redux'\nimport { withLoginRequired } from 'use-auth0-hooks'\n\nimport * as uiActions from '../../actions/ui'\nimport * as userActions from '../../actions/user'\nimport DesktopNav from '../app/desktop-nav'\nimport LinkButton from './link-button'\nimport TripSummaryPane from './trip-summary-pane'\nimport withLoggedInUserSupport from './with-logged-in-user-support'\n\n/**\n * This component displays the list of saved trips for the logged-in user.\n */\nconst SavedTripList = ({ trips }) => {\n  // TODO: Improve navigation.\n  const accountLink = <p><LinkButton to='/account'>Back to My Account</LinkButton></p>\n  let content\n\n  if (!trips || trips.length === 0) {\n    content = (\n      <>\n        {accountLink}\n        <h1>You have no saved trips</h1>\n        <p>Perform a trip search from the map first.</p>\n      </>\n    )\n  } else {\n    // Stack the saved trip summaries. When the user clicks on one, they can edit that trip.\n    content = (\n      <>\n        {accountLink}\n        <h1>My saved trips</h1>\n        {trips.map((trip, index) => <ConnectedTripListItem key={index} trip={trip} />)}\n      </>\n    )\n  }\n\n  return (\n    <div className='otp'>\n      {/* TODO: Do mobile view. */}\n      <DesktopNav />\n      <div className='container'>\n        {content}\n      </div>\n    </div>\n  )\n}\n\n// connect to the redux store\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    trips: state.user.loggedInUserMonitoredTrips\n  }\n}\n\nconst mapDispatchToProps = {}\n\nexport default withLoggedInUserSupport(\n  withLoginRequired(connect(mapStateToProps, mapDispatchToProps)(SavedTripList)),\n  true\n)\n\n/**\n * This class manages events and rendering for one item in the saved trip list.\n */\nclass TripListItem extends Component {\n  /**\n   * Navigate to the saved trip's URL #/savedtrips/trip-id-123.\n   * (There shouldn't be a need to encode the ids from Mongo.)\n   */\n  _handleEditTrip = () => {\n    const { routeTo, trip } = this.props\n    routeTo(`/savedtrips/${trip.id}`)\n  }\n\n  /**\n   * Pauses or resumes the specified trip.\n   */\n  _handlePauseOrResumeMonitoring = () => {\n    const { createOrUpdateUserMonitoredTrip, trip } = this.props\n    const newTrip = clone(trip)\n    newTrip.isActive = !newTrip.isActive\n\n    // Silent update of existing trip.\n    createOrUpdateUserMonitoredTrip(newTrip, false, true)\n  }\n\n  /**\n   * Deletes a trip from persistence.\n   * (The operation also refetches the redux monitoredTrips for the logged-in user.)\n   */\n  _handleDeleteTrip = async () => {\n    if (confirm('Would you like to remove this trip?')) {\n      const { deleteUserMonitoredTrip, trip } = this.props\n      await deleteUserMonitoredTrip(trip.id)\n    }\n  }\n\n  render () {\n    const { trip } = this.props\n    return (\n      <Panel>\n        <Panel.Heading>\n          <Panel.Title componentClass='h3'>{trip.tripName}</Panel.Title>\n        </Panel.Heading>\n        <Panel.Body>\n          <TripSummaryPane monitoredTrip={trip} />\n          <ButtonGroup>\n            <Button bsSize='small' onClick={this._handlePauseOrResumeMonitoring}>\n              {trip.isActive\n                ? <><Glyphicon glyph='pause' /> Pause</>\n                : <><Glyphicon glyph='play' /> Resume</>\n              }\n            </Button>\n            <Button bsSize='small' onClick={this._handleEditTrip}>\n              <Glyphicon glyph='pencil' /> Edit\n            </Button>\n            <Button bsSize='small' onClick={this._handleDeleteTrip}>\n              <Glyphicon glyph='trash' /> Delete\n            </Button>\n          </ButtonGroup>\n        </Panel.Body>\n      </Panel>\n    )\n  }\n}\n\n// connect to the redux store\nconst itemMapStateToProps = () => {}\n\nconst itemMapDispatchToProps = {\n  createOrUpdateUserMonitoredTrip: userActions.createOrUpdateUserMonitoredTrip,\n  deleteUserMonitoredTrip: userActions.deleteUserMonitoredTrip,\n  routeTo: uiActions.routeTo\n}\n\nconst ConnectedTripListItem = connect(itemMapStateToProps, itemMapDispatchToProps)(TripListItem)\n"]}