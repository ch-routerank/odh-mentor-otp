{"version":3,"sources":["index.story.js"],"names":["title","component","BaseMap","decorators","withInfo","withKnobs","parameters","info","text","center","sampleMarkers","samplePopup","color","onClick","onContextMenu","onPopupClosed","onOverlayAdded","onOverlayRemoved","onViewportChanged","layerOnOverlayAdded","layerOnOverlayRemoved","layerOnViewportChanged","clickAndViewportchangedEvents","zoomed","maxZoom","withExampleBaseLayers","mapboxToken","exampleBaseLayers","name","url","attribution","subdomains","detectRetina","retina","onBaseLayerChange","withSampleMarkers","withTwoOverlaysFromTrimetTransitComponents","overlayWithLargeDataSet","withOverlaysOverlappingOtherMarkers","customLocationPopupContent","location","contents","onContextMenuPopup"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Marker, CircleMarker } from \"react-leaflet\";\nimport { action } from \"@storybook/addon-actions\";\nimport { withInfo } from \"@storybook/addon-info\";\nimport { text, withKnobs } from \"@storybook/addon-knobs\";\n\nimport BaseMap from \".\";\nimport SelectVehicles from \"../__mocks__/SelectVehicles\";\nimport AllVehiclesOverlay from \"../__mocks__/AllVehicles\";\nimport ContextMenuDemo from \"../__mocks__/ContextMenuDemo\";\n\nimport \"../../../node_modules/leaflet/dist/leaflet.css\";\nimport \"../__mocks__/mapbox-wordmark.css\";\n\nexport default {\n  title: \"BaseMap\",\n  component: BaseMap,\n  decorators: [withInfo, withKnobs],\n  parameters: {\n    info: {\n      text: `\n      The BaseMap component renders a Leaflet map with overlays and other ad-hoc markers\n      that are declared as child elements of the BaseMap element.\n\n      Overlays are groups of similar React-Leaflet markers, e.g. vehicle location markers, bus stop markers, etc.\n      Overlays are automatically added to the overlay control displayed by the BaseMap. The user uses that control to turn overlays on or off.\n      See the [Two Overlays From TriMet Transit Components](./?path=/story/basemap--with-two-overlays-from-trimet-transit-components) example for more information on overlays.\n      `\n    }\n  }\n};\n\nconst center = [45.522862, -122.667837];\n\nconst sampleMarkers = (\n  <CircleMarker center={center} radius={100} interactive={false}>\n    <Marker position={center} />\n  </CircleMarker>\n);\n\nconst samplePopup = (\n  <div>\n    <h1>Popup Title</h1>\n    <p>\n      Sample <span style={{ color: \"purple\" }}>popup</span> content.\n    </p>\n  </div>\n);\n\nconst onClick = action(\"onClick\");\nconst onContextMenu = action(\"onContextMenu\");\nconst onPopupClosed = action(\"onPopupClosed\");\nconst onOverlayAdded = action(\"onOverlayAdded\");\nconst onOverlayRemoved = action(\"onOverlayRemoved\");\nconst onViewportChanged = action(\"onViewportChanged\");\n\nconst layerOnOverlayAdded = action(\"Layer::onOverlayAdded\");\nconst layerOnOverlayRemoved = action(\"Layer::onOverlayRemoved\");\nconst layerOnViewportChanged = action(\"Layer::onViewportChanged\");\n\nexport const clickAndViewportchangedEvents = () => (\n  <BaseMap\n    center={center}\n    onClick={onClick}\n    onContextMenu={onContextMenu}\n    onViewportChanged={onViewportChanged}\n  ></BaseMap>\n);\n\nexport const zoomed = () => <BaseMap center={center} zoom={17} />;\n\nexport const maxZoom = () => <BaseMap center={center} maxZoom={18} zoom={30} />;\n\nexport const withExampleBaseLayers = () => {\n  const mapboxToken = text(\"Your Mapbox token\", \"my_token\");\n  const exampleBaseLayers = [\n    {\n      name: \"Streets\",\n      url:\n        \"//cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}@2x.png\",\n      attribution:\n        'Map tiles: &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n      maxZoom: 20\n\n      // FIXME?? CartoDB displays characters proportionally too large\n      // on regular monitors (1080p or lower) when using the \"retina\" parameters below.\n      // (That does not happen on \"retina\" displays such as Macbook or mobile phones.)\n      // url:\n      //  \"//cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}{retina}.png\",\n      // retina: \"@2x\",\n      // detectRetina: true\n    },\n    {\n      name: \"TriMet\",\n      url:\n        \"//tile{s}.trimet.org/tilecache/tilecache.py/1.0.0/currentOSM/{z}/{x}/{y}\",\n      subdomains: \"abcd\",\n      attribution:\n        '&copy; <a target=\"#\" href=\"https://www.oregonmetro.gov/rlis-live\">Metro</a> | &copy; <a href=\"http://openstreetmap.org/copyright\">OpenStreetMap</a>',\n      maxZoom: 20,\n      detectRetina: true\n    },\n    {\n      name: \"Mapbox (Bring your own token)\",\n      url: `//api.mapbox.com/styles/v1/mapbox/light-v10/tiles/{z}/{x}/{y}{retina}?access_token=${mapboxToken}`,\n      attribution:\n        \"© <a href='https://www.mapbox.com/about/maps/'>Mapbox</a> © <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a> <strong><a href='https://www.mapbox.com/map-feedback/' target='_blank'>Improve this map</a></strong>\",\n      maxZoom: 20,\n      retina: \"@2x\"\n    },\n    {\n      name: \"Stamen Toner Lite\",\n      url: \"http://tile.stamen.com/toner-lite/{z}/{x}/{y}.png\",\n      attribution:\n        'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, under <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a>. Data by <a href=\"http://openstreetmap.org\">OpenStreetMap</a>, under <a href=\"http://www.openstreetmap.org/copyright\">ODbL</a>.'\n\n      // FIXME?? Stamen displays characters proportionally too large\n      // on regular monitors (1080p or lower) when using the \"retina\" parameters below.\n      // (That does not happen on \"retina\" displays such as Macbook or mobile phones.)\n      // url: \"http://tile.stamen.com/toner-lite/{z}/{x}/{y}{retina}.png\",\n      // retina: \"@2x\",\n      // detectRetina: true\n    }\n  ];\n\n  const onBaseLayerChange = action(\"onBaseLayerChange\");\n\n  return (\n    <BaseMap\n      onBaseLayerChange={onBaseLayerChange}\n      baseLayers={exampleBaseLayers}\n      center={center}\n    />\n  );\n};\n\nexport const withSampleMarkers = () => (\n  <BaseMap center={center}>{sampleMarkers}</BaseMap>\n);\n\nexport const withTwoOverlaysFromTrimetTransitComponents = () => (\n  <div>\n    <div>\n      Click the layers button to toggle overlays. Overlays manage their own\n      tooltips and popups. Check actions log for overlay events.\n    </div>\n    <BaseMap\n      center={center}\n      onOverlayAdded={onOverlayAdded}\n      onOverlayRemoved={onOverlayRemoved}\n      onViewportChanged={onViewportChanged}\n    >\n      <AllVehiclesOverlay name=\"Simple vehicle layer\" />\n      <SelectVehicles\n        name=\"Fancier vehicle layer\"\n        onOverlayAdded={layerOnOverlayAdded}\n        onOverlayRemoved={layerOnOverlayRemoved}\n        onViewportChanged={layerOnViewportChanged}\n        visible\n      />\n    </BaseMap>\n  </div>\n);\n\nexport const overlayWithLargeDataSet = () => (\n  <div>\n    <div>Do not add Storybook overhead on layers with large dataset...</div>\n    <BaseMap center={center}>\n      <AllVehiclesOverlay name=\"Simple vehicle layer\" />\n      <SelectVehicles name=\"Fancier vehicle layer\" limit={500} visible />\n    </BaseMap>\n  </div>\n);\n\nexport const withOverlaysOverlappingOtherMarkers = () => (\n  <div>\n    <div>\n      You should be able to see the tooltip and interact with the dots inside\n      the blue circle.\n    </div>\n    <BaseMap\n      center={center}\n      onOverlayAdded={onOverlayAdded}\n      onOverlayRemoved={onOverlayRemoved}\n    >\n      <AllVehiclesOverlay name=\"Simple vehicle layer\" />\n      <SelectVehicles name=\"Fancier vehicle layer\" visible />\n      {sampleMarkers}\n    </BaseMap>\n  </div>\n);\n\nexport const customLocationPopupContent = () => (\n  <BaseMap\n    center={center}\n    popup={{ location: center, contents: samplePopup }}\n    onPopupClosed={onPopupClosed}\n  />\n);\n\nexport const onContextMenuPopup = () => <ContextMenuDemo />;\n"]}