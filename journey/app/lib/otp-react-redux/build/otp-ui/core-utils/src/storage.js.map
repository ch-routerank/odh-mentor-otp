{"version":3,"sources":["storage.js"],"names":["STORAGE_PREFIX","storeItem","key","object","window","localStorage","setItem","JSON","stringify","getItem","notFoundValue","itemAsString","json","parse","e","console","warn","removeItem","randId","Math","random","toString","substr"],"mappings":";;;;;;;;;AAAA;AACA,MAAMA,cAAc,GAAG,KAAvB;AAEA;AACA;AACA;;AACO,SAASC,SAAT,CAAmBC,GAAnB,EAAwBC,MAAxB,EAAgC;AACrCC,EAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CACG,GAAEN,cAAe,IAAGE,GAAI,EAD3B,EAEEK,IAAI,CAACC,SAAL,CAAeL,MAAf,CAFF;AAID;AAED;AACA;AACA;AACA;;;AACO,SAASM,OAAT,CAAiBP,GAAjB,EAAsBQ,aAAa,GAAG,IAAtC,EAA4C;AACjD,MAAIC,YAAJ;;AACA,MAAI;AACFA,IAAAA,YAAY,GAAGP,MAAM,CAACC,YAAP,CAAoBI,OAApB,CAA6B,GAAET,cAAe,IAAGE,GAAI,EAArD,CAAf;AACA,UAAMU,IAAI,GAAGL,IAAI,CAACM,KAAL,CAAWF,YAAX,CAAb;AACA,QAAIC,IAAJ,EAAU,OAAOA,IAAP;AACV,WAAOF,aAAP;AACD,GALD,CAKE,OAAOI,CAAP,EAAU;AACV;AACAC,IAAAA,OAAO,CAACC,IAAR,CAAaF,CAAb,EAAgBH,YAAhB;AACA,WAAOD,aAAP;AACD;AACF;AAED;AACA;AACA;;;AACO,SAASO,UAAT,CAAoBf,GAApB,EAAyB;AAC9BE,EAAAA,MAAM,CAACC,YAAP,CAAoBY,UAApB,CAAgC,GAAEjB,cAAe,IAAGE,GAAI,EAAxD;AACD;AAED;AACA;AACA;AACA;;;AACO,SAASgB,MAAT,GAAkB;AACvB,SAAOC,IAAI,CAACC,MAAL,GACJC,QADI,CACK,EADL,EAEJC,MAFI,CAEG,CAFH,EAEM,CAFN,CAAP;AAGD","sourcesContent":["// Prefix to use with local storage keys.\nconst STORAGE_PREFIX = \"otp\";\n\n/**\n * Store a javascript object at the specified key.\n */\nexport function storeItem(key, object) {\n  window.localStorage.setItem(\n    `${STORAGE_PREFIX}.${key}`,\n    JSON.stringify(object)\n  );\n}\n\n/**\n * Retrieve a javascript object at the specified key. If not found, defaults to\n * null or, the optionally provided notFoundValue.\n */\nexport function getItem(key, notFoundValue = null) {\n  let itemAsString;\n  try {\n    itemAsString = window.localStorage.getItem(`${STORAGE_PREFIX}.${key}`);\n    const json = JSON.parse(itemAsString);\n    if (json) return json;\n    return notFoundValue;\n  } catch (e) {\n    // Catch any errors associated with parsing bad JSON.\n    console.warn(e, itemAsString);\n    return notFoundValue;\n  }\n}\n\n/**\n * Remove item at specified key.\n */\nexport function removeItem(key) {\n  window.localStorage.removeItem(`${STORAGE_PREFIX}.${key}`);\n}\n\n/**\n * Generate a random ID. This might not quite be a UUID, but it serves our\n * purposes for now.\n */\nexport function randId() {\n  return Math.random()\n    .toString(36)\n    .substr(2, 9);\n}\n"]}