.leaflet-popup-content {
  box-sizing: border-box !important;
  font-size: $font-size-base;

  * {
    box-sizing: border-box !important;
  }
}

.leaflet-top.leaflet-right {
  .leaflet-control-layers {
    border: 0;
    background-color: transparent;
  }

  .leaflet-control-layers-toggle {
    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNiIgaGVpZ2h0PSIyOCIgdmlld0JveD0iMCAwIDI2IDI4Ij4KICA8ZyBpZD0ibm91bl9maWx0ZXJfMzYwNDI5NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMgLTIpIj4KICAgIDxnIGlkPSJHcm91cF85OCIgZGF0YS1uYW1lPSJHcm91cCA5OCI+CiAgICAgIDxwYXRoIGlkPSJQYXRoXzU0IiBkYXRhLW5hbWU9IlBhdGggNTQiIGQ9Ik00LDdIOS4xQTMuOTksMy45OSwwLDAsMCwxMywxMGE0LjA3OSw0LjA3OSwwLDAsMCwzLjktM0gyOGEuOTQ1Ljk0NSwwLDAsMCwxLTEsLjk0NS45NDUsMCwwLDAtMS0xSDE2LjlBMy45OSwzLjk5LDAsMCwwLDEzLDIsNC4wNzksNC4wNzksMCwwLDAsOS4xLDVINEEuOTQ1Ljk0NSwwLDAsMCwzLDYsLjk0NS45NDUsMCwwLDAsNCw3Wm05LTNhMiwyLDAsMSwxLTIsMkEyLjAwNiwyLjAwNiwwLDAsMSwxMyw0WiIgZmlsbD0iI2ZmZiIvPgogICAgICA8cGF0aCBpZD0iUGF0aF81NSIgZGF0YS1uYW1lPSJQYXRoIDU1IiBkPSJNNCwxN0gxNi4xQTMuOTksMy45OSwwLDAsMCwyMCwyMGE0LjA3OSw0LjA3OSwwLDAsMCwzLjktM0gyOGExLDEsMCwwLDAsMC0ySDIzLjlBMy45OSwzLjk5LDAsMCwwLDIwLDEyYTQuMDc5LDQuMDc5LDAsMCwwLTMuOSwzSDRhMSwxLDAsMCwwLDAsMlptMTYtM2EyLDIsMCwxLDEtMiwyQTIuMDA2LDIuMDA2LDAsMCwxLDIwLDE0WiIgZmlsbD0iI2ZmZiIvPgogICAgICA8cGF0aCBpZD0iUGF0aF81NiIgZGF0YS1uYW1lPSJQYXRoIDU2IiBkPSJNNCwyN0g5LjFBMy45OSwzLjk5LDAsMCwwLDEzLDMwYTQuMDc5LDQuMDc5LDAsMCwwLDMuOS0zSDI4YTEsMSwwLDAsMCwwLTJIMTYuOUEzLjk5LDMuOTksMCwwLDAsMTMsMjJhNC4wNzksNC4wNzksMCwwLDAtMy45LDNINGExLDEsMCwwLDAsMCwyWm05LTNhMiwyLDAsMSwxLTIsMkEyLjAwNiwyLjAwNiwwLDAsMSwxMywyNFoiIGZpbGw9IiNmZmYiLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo=");
    background-size: 40%;
    border-radius: 100%;
    width: 60px;
    height: 60px;
    background-color: $brand-primary;
    display: inline-block !important;
    position: absolute;
    top: 15px;
    right: 20px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);
    z-index: 2;
  }

  .leaflet-control-layers-list {
    background-color: $body-bg;
    border-radius: $border-radius-large;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);
    top: 90px !important;
    position: relative;

    &:before {
      position: absolute;
      top: -14px;
      right: 20px;
      content: "";
      width: 0;
      height: 0;
      border-style: solid;
      border-width: 0 19px 15px 19px;
      border-color: transparent transparent #ffffff transparent;
      filter: drop-shadow(0px -17px 10px rgba(0,0,0,.3))
    }
  }
}

/* PATCH needful */
.leaflet-control-layers-overlays {
  -webkit-user-select: none;    /* Safari */
  -webkit-touch-callout: none;  /* iOS Safari */
  -khtml-user-select: none;     /* Konqueror HTML */
  -ms-user-select: none;        /* Internet Explorer/Edge */
  -moz-user-select: none;       /* Old versions of Firefox */
  user-select: none;           /* Non-prefixed version*/
  padding: 3rem;

  label {
    font-family: inherit;
    font-weight: 400;
    font-size: $font-size-base;
    position: relative;
    cursor: pointer;

    &:not(:last-child) {
      margin-bottom: 4rem;
    }

    input[type="checkbox"] {
      position: absolute;
      right: 0;
      top: 0;
      z-index: -1;
      visibility: hidden;
    }

    span {
      position: relative;
      height: $font-size-base;
      display: block;
      padding-right: 100px;

      &:before {
        position: absolute;
        top: 0;
        right: 0;
        width: 45px;
        height: 25px;
        border: 1px solid $brand-primary;
        border-radius: 25px;
        content: '';
        transition: all .3s ease-in-out;
      }

      &:after {
        position: absolute;
        top: 2px;
        right: 22px;
        width: 21px;
        height: 21px;
        border-radius: 100%;
        content: '';
        background-color: $brand-primary;
        transition: all .3s ease-in-out;
      }
    }

    input[type="checkbox"]:checked + span {
      &:before {
        background-color: $brand-primary;
      }

      &:after {
        background-color: #fff;
        right: 2px;
      }
    }
  }
}
