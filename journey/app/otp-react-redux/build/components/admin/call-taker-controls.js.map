{"version":3,"sources":["call-taker-controls.js"],"names":["RED","BLUE","GREEN","CallTakerControls","Component","_callInProgress","props","endCall","beginCall","marginLeft","position","marginTop","toggleCallHistory","Boolean","activeCall","componentWillReceiveProps","nextProps","session","fetchCalls","render","circleButtonStyle","zIndex","color","borderRadius","border","boxShadow","top","backgroundColor","height","width","_onClickCall","_renderCallButton","display","fontWeight","textAlign","_onToggleCallHistory","mapStateToProps","state","ownProps","callTaker","callTakerActions","mapDispatchToProps","routingQuery","setMainPanelContent"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport * as callTakerActions from '../../actions/call-taker'\nimport { routingQuery } from '../../actions/api'\nimport { setMainPanelContent } from '../../actions/ui'\nimport CallTimeCounter from './call-time-counter'\nimport Icon from '../narrative/icon'\n\nconst RED = '#C35134'\nconst BLUE = '#1C4D89'\nconst GREEN = '#6B931B'\n\n/**\n * This component displays the controls for the Call Taker/Field Trip modules,\n * including:\n *  - start/end call button\n *  - view call list\n *  TODO\n *  - view field trip list\n */\nclass CallTakerControls extends Component {\n  componentWillReceiveProps (nextProps) {\n    const {session} = nextProps\n    // Once session is available, fetch calls.\n    if (session && !this.props.session) {\n      this.props.fetchCalls()\n    }\n  }\n\n  _onClickCall = () => {\n    if (this._callInProgress()) this.props.endCall()\n    else this.props.beginCall()\n  }\n\n  _renderCallButton = () => {\n    // Show stop button if call not in progress.\n    if (this._callInProgress()) {\n      return (\n        <Icon type='stop' style={{marginLeft: '3px'}} className='fa-3x' />\n      )\n    }\n    // No call is in progress.\n    return (\n      <>\n        <Icon\n          type='plus'\n          style={{\n            position: 'absolute',\n            marginLeft: '17px',\n            marginTop: '6px'\n          }} />\n        <Icon type='phone' className='fa-4x fa-flip-horizontal' />\n      </>\n    )\n  }\n\n  _onToggleCallHistory = () => this.props.toggleCallHistory()\n\n  _callInProgress = () => Boolean(this.props.activeCall)\n\n  render () {\n    const {session} = this.props\n    // If no valid session is found, do not show calltaker controls.\n    if (!session) return null\n    // FIXME: styled component\n    const circleButtonStyle = {\n      position: 'absolute',\n      zIndex: 999999,\n      color: 'white',\n      borderRadius: '50%',\n      border: 'none',\n      boxShadow: '2px 2px 4px #000000'\n    }\n    return (\n      <>\n        {/* Start/End Call button */}\n        <button\n          style={{\n            ...circleButtonStyle,\n            top: '154px',\n            backgroundColor: this._callInProgress() ? RED : BLUE,\n            height: '80px',\n            width: '80px',\n            marginLeft: '-8px'\n\n          }}\n          className='call-taker-button'\n          onClick={this._onClickCall}\n        >\n          {this._renderCallButton()}\n        </button>\n        {this._callInProgress()\n          ? <CallTimeCounter style={{\n            display: 'inline',\n            position: 'absolute',\n            zIndex: 999999,\n            top: '241px',\n            borderRadius: '20px',\n            backgroundColor: BLUE,\n            boxShadow: '2px 2px 4px #000000',\n            color: 'white',\n            fontWeight: '600',\n            textAlign: 'center',\n            width: '80px',\n            marginLeft: '-8px'\n          }} />\n          : null\n        }\n        {/* Call History toggle button */}\n        <button\n          style={{\n            ...circleButtonStyle,\n            top: '140px',\n            backgroundColor: GREEN,\n            height: '40px',\n            width: '40px',\n            marginLeft: '69px'\n\n          }}\n          className='call-taker-button'\n          onClick={this._onToggleCallHistory}\n        >\n          <Icon type='history' className='fa-2x' style={{marginLeft: '-3px'}} />\n        </button>\n        {/* Field Trip toggle button TODO */}\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    activeCall: state.callTaker.activeCall,\n    session: state.callTaker.session\n  }\n}\n\nconst {beginCall, endCall, fetchCalls, toggleCallHistory} = callTakerActions\n\nconst mapDispatchToProps = {\n  beginCall,\n  endCall,\n  fetchCalls,\n  routingQuery,\n  setMainPanelContent,\n  toggleCallHistory\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CallTakerControls)\n"]}