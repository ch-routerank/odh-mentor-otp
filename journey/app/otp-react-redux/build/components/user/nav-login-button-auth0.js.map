{"version":3,"sources":["nav-login-button-auth0.js"],"names":["NavLoginButtonAuth0","className","id","links","style","isAuthenticated","login","logout","user","afterLoginPath","handleLogin","redirect_uri","URL_ROOT","appState","urlHash","window","location","hash"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AACA;;;;AAEA;AACA;AACA;AACA,MAAMA,mBAAmB,GAAG,CAAC;AAC3BC,EAAAA,SAD2B;AAE3BC,EAAAA,EAF2B;AAG3BC,EAAAA,KAH2B;AAI3BC,EAAAA;AAJ2B,CAAD,KAKtB;AACJ,QAAM;AAAEC,IAAAA,eAAF;AAAmBC,IAAAA,KAAnB;AAA0BC,IAAAA,MAA1B;AAAkCC,IAAAA;AAAlC,MAA2C,6BAAjD,CADI,CAGJ;AACA;;AACA,QAAMC,cAAc,GAAG,aAAvB;;AACA,QAAMC,WAAW,GAAG,MAAMJ,KAAK,CAAC;AAC9BK,IAAAA,YAAY,EAAG,GAAEC,mBAAS,GAAEH,cAAe,EADb;AAE9BI,IAAAA,QAAQ,EAAE;AAACC,MAAAA,OAAO,EAAEC,MAAM,CAACC,QAAP,CAAgBC;AAA1B,KAFoB,CAEY;;AAFZ,GAAD,CAA/B,CANI,CAWJ;AACA;;;AAEA,sBACE,6BAAC,uBAAD;AACE,IAAA,SAAS,EAAEhB,SADb;AAEE,IAAA,EAAE,EAAEC,EAFN;AAGE,IAAA,KAAK,EAAEC,KAHT;AAIE,IAAA,aAAa,EAAEO,WAJjB;AAKE,IAAA,cAAc,EAAEH,MALlB;AAME,IAAA,OAAO,EAAEF,eAAe,GAAGG,IAAH,GAAU,IANpC;AAOE,IAAA,KAAK,EAAEJ;AAPT,IADF;AAWD,CA9BD;;eAgCeJ,mB","sourcesContent":["import React from 'react'\nimport { useAuth } from 'use-auth0-hooks'\n\nimport { URL_ROOT } from '../../util/constants'\nimport NavLoginButton from './nav-login-button'\n\n/**\n * This component wraps NavLoginButton with Auth0 information.\n */\nconst NavLoginButtonAuth0 = ({\n  className,\n  id,\n  links,\n  style\n}) => {\n  const { isAuthenticated, login, logout, user } = useAuth()\n\n  // On login, preserve the current trip query if any.\n  // TODO: check that URLs are whitelisted. All trip query URLs in /#/ are.\n  const afterLoginPath = '/#/signedin'\n  const handleLogin = () => login({\n    redirect_uri: `${URL_ROOT}${afterLoginPath}`,\n    appState: {urlHash: window.location.hash} // The part of href from #/?, e.g. #/?ui_activeSearch=...\n  })\n\n  // On logout, it is better to \"clear\" the screen, so\n  // return to redirectUri set in <Auth0Provider> (no specific event handler).\n\n  return (\n    <NavLoginButton\n      className={className}\n      id={id}\n      links={links}\n      onSignInClick={handleLogin}\n      onSignOutClick={logout}\n      profile={isAuthenticated ? user : null}\n      style={style}\n    />\n  )\n}\n\nexport default NavLoginButtonAuth0\n"]}