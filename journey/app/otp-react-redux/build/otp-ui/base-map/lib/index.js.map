{"version":3,"sources":["index.js"],"names":["Object","defineProperty","exports","value","default","_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_reactLeaflet","_coreUtils","_leaflet","_util","obj","__esModule","_getRequireWildcardCache","WeakMap","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_defineProperty","enumerable","configurable","writable","Map","panToOffset","latlng","offsetX","offsetY","options","x","latLngToContainerPoint","parseInt","y","point","containerPointToLatLng","setView","_zoom","pan","Evented","addInitHook","singleClickTimeout","on","scheduleSingleClick","cancelSingleClick","include","setTimeout","clearSingleClickTimeout","bind","e","fireSingleClick","originalEvent","_stopped","fire","Util","extend","type","clearTimeout","BaseMap","Component","constructor","props","baseLayers","layerIndex","state","activeLayer","url","startsWith","onClick","eventName","layer","overlays","find","child","name","forEach","onBaseLayerChange","index","findIndex","l","setState","forwardOne","forwardAll","overlay","push","componentDidMount","lmap","refs","map","leafletElement","onLeftClick","componentDidUpdate","componentWillUnmount","eachLayer","removeLayer","render","center","children","maxZoom","popup","onContextMenu","onPopupClosed","zoom","userControlledOverlays","fixedOverlays","Children","toArray","newChild","cloneElement","registerOverlay","createElement","ref","className","onOverlayAdd","handleOverlayAdded","handleBaseLayerChange","onOverlayRemove","handleOverlayRemoved","onViewportChanged","handleViewportChanged","showMapboxWordmark","href","target","LayersControl","position","i","BaseLayer","checked","retina","TileLayer","attribution","tileSize","zoomOffset","detectRetina","Overlay","visible","location","contents","Popup","onClose","propTypes","oneOfType","node","arrayOf","shape","string","isRequired","subdomains","number","hasRetinaSupport","bool","types","latlngType","func","onOverlayAdded","onOverlayRemoved","defaultProps","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactLeaflet = require(\"react-leaflet\");\n\nvar _coreUtils = _interopRequireDefault(require(\"@opentripplanner/core-utils\"));\n\nvar _leaflet = _interopRequireDefault(require(\"leaflet\"));\n\nvar _util = _interopRequireDefault(require(\"./util\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * panToOffset will allow you to pan the map and adjust for something like a floating\n * left nav bar, or a page header with an offset center\n *\n * @note adapted from Peter's code: https://gist.github.com/missinglink/7620340\n *\n * @param latlng\n * @param offsetX & offsetY: defaults to [0, 0] ([X, Y] pixel offsets center) a positive x\n * offset to shift the center to the right, and a positive y offset to shift the center to the\n * bottom. Negatives will move to the center point left and top.\n * @param options: pan options https://leafletjs.com/reference.html#pan-options\n * @return return value from a call to https://leafletjs.com/reference.html#map-panto\n */\n_leaflet.default.Map.prototype.panToOffset = function (latlng, offsetX, offsetY, options) {\n  const x = this.latLngToContainerPoint(latlng).x - (parseInt(offsetX, 10) || 0);\n  const y = this.latLngToContainerPoint(latlng).y - (parseInt(offsetY, 10) || 0);\n  const point = this.containerPointToLatLng([x, y]);\n  /* eslint-disable-next-line no-underscore-dangle */\n\n  return this.setView(point, this._zoom, {\n    pan: options\n  });\n}; // eslint-disable-next-line func-names\n\n\n_leaflet.default.Evented.addInitHook(function () {\n  if (this) this.singleClickTimeout = null;\n  this.on(\"click\", this.scheduleSingleClick, this);\n  this.on(\"dblclick dragstart zoomstart\", this.cancelSingleClick, this);\n});\n\n_leaflet.default.Evented.include({\n  cancelSingleClick() {\n    // This timeout is key to workaround an issue where double-click events\n    // are fired in this order on some touch browsers: ['click', 'dblclick', 'click']\n    // instead of ['click', 'click', 'dblclick']\n    setTimeout(this.clearSingleClickTimeout.bind(this), 0);\n  },\n\n  scheduleSingleClick(e) {\n    this.clearSingleClickTimeout();\n    this.singleClickTimeout = setTimeout(this.fireSingleClick.bind(this, e), this.options.singleClickTimeout || 500);\n  },\n\n  fireSingleClick(e) {\n    // eslint-disable-next-line no-underscore-dangle\n    if (!e.originalEvent._stopped) {\n      this.fire(\"singleclick\", _leaflet.default.Util.extend(e, {\n        type: \"singleclick\"\n      }));\n    }\n  },\n\n  clearSingleClickTimeout() {\n    if (this.singleClickTimeout !== null) {\n      clearTimeout(this.singleClickTimeout);\n      this.singleClickTimeout = null;\n    }\n  }\n\n});\n/**\n * The base OpenTripPlanner map on which everything else is rendered.\n */\n\n\nclass BaseMap extends _react.Component {\n  constructor(props) {\n    super(props); // Default active base layer index to zero (first layer).\n    // TODO: derive layerIndex from props?\n\n    _defineProperty(this, \"overlays\", []);\n\n    _defineProperty(this, \"showMapboxWordmark\", () => {\n      const {\n        baseLayers\n      } = this.props;\n      const {\n        layerIndex\n      } = this.state; // Get current layer and check its URL.\n\n      const activeLayer = baseLayers[layerIndex];\n      return activeLayer && activeLayer.url.startsWith(\"//api.mapbox.com\");\n    });\n\n    _defineProperty(this, \"onLeftClick\", e => {\n      const {\n        onClick\n      } = this.props;\n      (0, _util.default)(onClick)(e);\n    });\n\n    _defineProperty(this, \"forwardOne\", (eventName, e) => {\n      // Call the event handler, if implemented, on the layer for which this event applies.\n      const layer = this.overlays.find(child => child.props.name === e.name);\n      if (layer) (0, _util.default)(layer[eventName])(e); // Call the event handler on this control's parent element.\n      // eslint-disable-next-line react/destructuring-assignment\n\n      (0, _util.default)(this.props[eventName])(e);\n    });\n\n    _defineProperty(this, \"forwardAll\", (eventName, e) => {\n      // Call the event handler, if implemented, on each registered overlay.\n      this.overlays.forEach(layer => {\n        (0, _util.default)(layer[eventName])(e);\n      }); // Call the event handler on this control's parent element.\n      // eslint-disable-next-line react/destructuring-assignment\n\n      (0, _util.default)(this.props[eventName])(e);\n    });\n\n    _defineProperty(this, \"handleBaseLayerChange\", e => {\n      const {\n        baseLayers,\n        onBaseLayerChange\n      } = this.props; // Find layer index\n\n      const index = baseLayers.findIndex(l => l.name === e.name);\n      const layer = baseLayers[index]; // Call prop if exists.\n\n      if (typeof onBaseLayerChange === \"function\") {\n        onBaseLayerChange({\n          index,\n          layer\n        });\n      } // Update active index in state.\n\n\n      this.setState({\n        layerIndex: index\n      });\n    });\n\n    _defineProperty(this, \"handleOverlayAdded\", e => {\n      this.forwardOne(\"onOverlayAdded\", e);\n    });\n\n    _defineProperty(this, \"handleOverlayRemoved\", e => {\n      this.forwardOne(\"onOverlayRemoved\", e);\n    });\n\n    _defineProperty(this, \"handleViewportChanged\", e => {\n      this.forwardAll(\"onViewportChanged\", e);\n    });\n\n    _defineProperty(this, \"registerOverlay\", overlay => {\n      this.overlays.push(overlay);\n    });\n\n    this.state = {\n      layerIndex: 0\n    };\n  }\n\n  componentDidMount() {\n    // register single click event\n    const lmap = this.refs.map.leafletElement;\n    lmap.options.singleClickTimeout = 250;\n    lmap.on(\"singleclick\", this.onLeftClick);\n  }\n\n  componentDidUpdate() {} // remove custom overlays on unmount\n  // TODO: Is this needed? It may have something to do with mobile vs desktop views\n\n\n  componentWillUnmount() {\n    const lmap = this.refs.map.leafletElement;\n    lmap.eachLayer(layer => {\n      // Do not inline, there is a 'this' implied.\n      lmap.removeLayer(layer);\n    });\n  }\n  /**\n   * Returns whether to show the Mapbox wordmark (if the current layer's URL is\n   * a Mapbox url).\n   */\n\n\n  render() {\n    const {\n      baseLayers,\n      center,\n      children,\n      maxZoom,\n      popup,\n      onContextMenu,\n      onPopupClosed,\n      zoom\n    } = this.props;\n    const {\n      layerIndex\n    } = this.state; // Separate overlay layers into user-controlled (those with a checkbox in\n    // the layer control) and those that are needed by the app (e.g., stop viewer\n    // and itinerary overlay).\n\n    const userControlledOverlays = [];\n    const fixedOverlays = [];\n\n    _react.default.Children.toArray(children).forEach(child => {\n      if (child.props.name) {\n        const newChild = /*#__PURE__*/_react.default.cloneElement(child, {\n          // Inject registerOverlay prop to each custom overlay.\n          registerOverlay: this.registerOverlay\n        });\n\n        userControlledOverlays.push(newChild);\n      } else fixedOverlays.push(child);\n    });\n\n    return /*#__PURE__*/_react.default.createElement(_reactLeaflet.Map, {\n      ref: \"map\",\n      className: \"map\",\n      center: center,\n      zoom: zoom,\n      maxZoom: maxZoom // onClick={this.onLeftClick}\n      // Note: Map-click is handled via single-click plugin, set up in componentDidMount()\n      ,\n      onContextMenu: onContextMenu,\n      onOverlayAdd: this.handleOverlayAdded,\n      onBaseLayerChange: this.handleBaseLayerChange,\n      onOverlayRemove: this.handleOverlayRemoved,\n      onViewportChanged: this.handleViewportChanged\n    }, this.showMapboxWordmark() && /*#__PURE__*/_react.default.createElement(\"a\", {\n      href: \"http://mapbox.com/about/maps\",\n      className: \"mapbox-wordmark\",\n      target: \"_blank noopener noreferrer\"\n    }, \"Mapbox\"), /*#__PURE__*/_react.default.createElement(_reactLeaflet.LayersControl, {\n      position: \"topright\"\n    }, baseLayers && baseLayers.map((layer, i) => {\n      return /*#__PURE__*/_react.default.createElement(_reactLeaflet.LayersControl.BaseLayer, {\n        name: layer.name,\n        checked: i === layerIndex,\n        key: i\n      }, layer.retina ? /*#__PURE__*/_react.default.createElement(_reactLeaflet.TileLayer, {\n        url: layer.url,\n        attribution: layer.attribution,\n        retina: layer.retina,\n        maxZoom: layer.maxZoom,\n        tileSize: 512,\n        zoomOffset: -1,\n        detectRetina: layer.detectRetina\n      }) : /*#__PURE__*/_react.default.createElement(_reactLeaflet.TileLayer, {\n        url: layer.url,\n        attribution: layer.attribution,\n        maxZoom: layer.maxZoom,\n        detectRetina: layer.detectRetina\n      }));\n    }), userControlledOverlays.map((child, i) => /*#__PURE__*/_react.default.createElement(_reactLeaflet.LayersControl.Overlay, {\n      key: i,\n      name: child.props.name,\n      checked: child.props.visible\n    }, child))), fixedOverlays, popup && popup.location && popup.contents && /*#__PURE__*/_react.default.createElement(_reactLeaflet.Popup, {\n      position: popup.location,\n      onClose: onPopupClosed\n    }, popup.contents));\n  }\n\n}\n\nBaseMap.propTypes = {\n  /**\n   * Zero, one, or multiple components that extend { MapLayer } from 'react-leaflet'.\n   * Children can be overlays or loose markers.\n   */\n  children: _propTypes.default.oneOfType([// Ideally, the types below should be MapLayer,\n  // however, during type validation in the browser,\n  // MapLayer components all seem to resolve to Object.\n  _propTypes.default.node, _propTypes.default.arrayOf(_propTypes.default.node)]),\n\n  /**\n   * The base (background) layers for the map.\n   */\n  baseLayers: _propTypes.default.arrayOf(_propTypes.default.shape({\n    name: _propTypes.default.string.isRequired,\n    url: _propTypes.default.string.isRequired,\n    subdomains: _propTypes.default.string,\n    attribution: _propTypes.default.string,\n    maxZoom: _propTypes.default.number,\n    hasRetinaSupport: _propTypes.default.bool\n  })),\n\n  /**\n   * The center of the map, as a [lat, lng] array.\n   */\n  center: _coreUtils.default.types.latlngType.isRequired,\n\n  /**\n   * The maximum zoom level allowed on the map.\n   */\n  maxZoom: _propTypes.default.number,\n\n  /**\n   * Triggered when the user changes the active base layer.\n   * See https://leafletjs.com/reference-1.7.1.html#map-baselayerchange\n   */\n  onBaseLayerChange: _propTypes.default.func,\n\n  /**\n   * Triggered when the user clicks on the map.\n   * See https://leafletjs.com/reference-1.6.0.html#map-click for details.\n   */\n  onClick: _propTypes.default.func,\n\n  /**\n   * Triggered when the user right-clicks on the map or, on a mobile device, presses the map for a second (\"long-press\").\n   * See https://leafletjs.com/reference-1.6.0.html#map-contextmenu for details.\n   */\n  onContextMenu: _propTypes.default.func,\n\n  /**\n   * Triggered when the user makes an overlay visible using the map's layers control.\n   * See https://leafletjs.com/reference-1.6.0.html#map-overlayadd for details.\n   */\n  // eslint-disable-next-line react/no-unused-prop-types\n  onOverlayAdded: _propTypes.default.func,\n\n  /**\n   * Triggered when the user hides an overlay using the map's layers control.\n   * See https://leafletjs.com/reference-1.6.0.html#map-overlayremove for details.\n   */\n  // eslint-disable-next-line react/no-unused-prop-types\n  onOverlayRemoved: _propTypes.default.func,\n\n  /**\n   * Triggered when the user closes the popup (if `popupLocation` and `popupContent` have been set).\n   */\n  onPopupClosed: _propTypes.default.func,\n\n  /**\n   * Triggered when the user pans the map or changes zoom level.\n   * See https://github.com/PaulLeCam/react-leaflet/blob/master/example/components/viewport.js for more details.\n   */\n  // eslint-disable-next-line react/no-unused-prop-types\n  onViewportChanged: _propTypes.default.func,\n\n  /**\n   * The contents and location (in [lat, lng] format) of the popup to display, or null if no popup is displayed.\n   */\n  popup: _propTypes.default.shape({\n    contents: _propTypes.default.node.isRequired,\n    location: _coreUtils.default.types.latlngType.isRequired\n  }),\n\n  /**\n   * The zoom level of the map.\n   */\n  zoom: _propTypes.default.number\n};\nBaseMap.defaultProps = {\n  children: null,\n  baseLayers: [{\n    name: \"Streets\",\n    url: \"//cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}@2x.png\",\n    attribution: 'Map tiles: &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n    maxZoom: 20 // FIXME?? CartoDB displays characters proportionally too large\n    // on regular monitors (1080p or lower) when using the \"retina\" parameters below.\n    // (That does not happen on \"retina\" displays such as Macbook or mobile phones.)\n    // url:\n    //  \"//cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}{retina}.png\",\n    // retina: \"@2x\",\n    // detectRetina: true\n\n  }],\n  maxZoom: 20,\n  onBaseLayerChange: null,\n  onClick: null,\n  onContextMenu: null,\n  onOverlayAdded: null,\n  onOverlayRemoved: null,\n  onPopupClosed: null,\n  onViewportChanged: null,\n  popup: null,\n  zoom: 13\n};\nvar _default = BaseMap;\nexports.default = _default;"]}