{"version":3,"sources":["LocationField.story.js"],"names":["currentPosition","coords","latitude","longitude","geocoderConfig","baseUrl","boundary","rect","minLon","maxLon","minLat","maxLat","maxResults","maxNearbyStops","type","getCurrentPosition","nearbyStops","onLocationSelected","selectedLocation","name","sessionSearches","lat","lon","stopsIndex","code","dist","routes","shortName","userLocationsAndRecentPlaces","icon","StyledLocationField","LocationField","LocationFieldClasses","OptionContainer","GeocodedOptionIconComponent","feature","properties","layer","propTypes","geocodedFeatureType","isRequired","LocationIconComponent","locationType","PropTypes","string","UserLocationIconComponent","userLocation","userLocationType","module","addDecorator","withA11y","withInfo","add"],"mappings":"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","sourcesContent":["import {\n  geocodedFeatureType,\n  userLocationType\n} from \"@opentripplanner/core-utils/lib/types\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { storiesOf } from \"@storybook/react\";\nimport { withA11y } from \"@storybook/addon-a11y\";\nimport { withInfo } from \"@storybook/addon-info\";\nimport { action } from \"@storybook/addon-actions\";\nimport styled from \"styled-components\";\nimport {\n  Building,\n  Clock,\n  Crosshairs,\n  MapPin,\n  MapSigns,\n  PlaneArrival,\n  PlaneDeparture,\n  SkullCrossbones,\n  Star,\n  Train\n} from \"styled-icons/fa-solid\";\n\nimport LocationField from \".\";\nimport * as LocationFieldClasses from \"./styled\";\n\nconst currentPosition = {\n  coords: { latitude: 45.508246, longitude: -122.711574 }\n};\nconst geocoderConfig = {\n  baseUrl: \"https://ws-st.trimet.org/pelias/v1\", // TriMet-specific default\n  boundary: {\n    // TriMet-specific default\n    rect: {\n      minLon: -123.2034,\n      maxLon: -122.135,\n      minLat: 45.273,\n      maxLat: 45.7445\n    }\n  },\n  maxResults: 30,  \n  maxNearbyStops: 4,\n  type: \"PELIAS\"\n};\nconst getCurrentPosition = action(\"getCurrentPosition\");\nconst nearbyStops = [\"1\", \"2\"];\nconst onLocationSelected = action(\"onLocationSelected\");\nconst selectedLocation = { name: \"123 Main St\" };\nconst sessionSearches = [\n  {\n    lat: 12.34,\n    lon: 34.45,\n    name: \"123 Main St\"\n  }\n];\nconst stopsIndex = {\n  \"1\": {\n    code: \"1\",\n    dist: 123,\n    lat: 12.34,\n    lon: 34.56,\n    name: \"1st & Main\",\n    routes: [{ shortName: \"1\" }]\n  },\n  \"2\": {\n    code: \"2\",\n    dist: 345,\n    lat: 23.45,\n    lon: 67.89,\n    name: \"Main & 2nd\",\n    routes: [{ shortName: \"2\" }]\n  }\n};\nconst userLocationsAndRecentPlaces = [\n  {\n    icon: \"home\",\n    lat: 45.89,\n    lon: 67.12,\n    name: \"456 Suburb St\",\n    type: \"home\"\n  },\n  {\n    icon: \"work\",\n    lat: 54.32,\n    lon: 43.21,\n    name: \"789 Busy St\",\n    type: \"work\"\n  },\n  {\n    lat: 12.34,\n    lon: 34.45,\n    name: \"123 Main St\",\n    type: \"recent\"\n  }\n];\n\nconst StyledLocationField = styled(LocationField)`\n  ${LocationFieldClasses.OptionContainer} {\n    font-size: 24px;\n    background-color: pink;\n  }\n`;\n\nfunction GeocodedOptionIconComponent({ feature }) {\n  if (feature.properties.layer === \"stops\") return <MapSigns size={13} />;\n  if (feature.properties.layer === \"station\") return <Train size={13} />;\n  return <MapPin size={13} />;\n}\n\nGeocodedOptionIconComponent.propTypes = {\n  feature: geocodedFeatureType.isRequired\n};\n\nfunction LocationIconComponent({ locationType }) {\n  if (locationType === \"from\") return <PlaneDeparture size={13} />;\n  return <PlaneArrival size={13} />;\n}\n\nLocationIconComponent.propTypes = {\n  locationType: PropTypes.string.isRequired\n};\n\nfunction UserLocationIconComponent({ userLocation }) {\n  if (userLocation.icon === \"work\") return <Building size={13} />;\n  return <Star size={13} />;\n}\n\nUserLocationIconComponent.propTypes = {\n  userLocation: userLocationType.isRequired\n};\n\nstoriesOf(\"LocationField\", module)\n  .addDecorator(withA11y)\n  .addDecorator(withInfo)\n  .add(\"LocationField in desktop context\", () => (\n    <LocationField\n      currentPosition={currentPosition}\n      geocoderConfig={geocoderConfig}\n      getCurrentPosition={getCurrentPosition}\n      inputPlaceholder=\"Select from location\"\n      locationType=\"from\"\n      onLocationSelected={onLocationSelected}\n    />\n  ))\n  .add(\"LocationField in mobile context\", () => (\n    <LocationField\n      currentPosition={currentPosition}\n      geocoderConfig={geocoderConfig}\n      getCurrentPosition={getCurrentPosition}\n      locationType=\"from\"\n      onLocationSelected={onLocationSelected}\n      static\n    />\n  ))\n  .add(\"Styled LocationField in mobile context\", () => (\n    <StyledLocationField\n      currentPosition={currentPosition}\n      geocoderConfig={geocoderConfig}\n      getCurrentPosition={getCurrentPosition}\n      locationType=\"from\"\n      onLocationSelected={onLocationSelected}\n      static\n    />\n  ))\n  .add(\"LocationField with selected location in desktop context\", () => (\n    <LocationField\n      currentPosition={currentPosition}\n      geocoderConfig={geocoderConfig}\n      getCurrentPosition={getCurrentPosition}\n      location={selectedLocation}\n      locationType=\"to\"\n      onLocationSelected={onLocationSelected}\n    />\n  ))\n  .add(\"LocationField with selected location in mobile context\", () => (\n    <LocationField\n      currentPosition={currentPosition}\n      geocoderConfig={geocoderConfig}\n      getCurrentPosition={getCurrentPosition}\n      location={selectedLocation}\n      locationType=\"to\"\n      onLocationSelected={onLocationSelected}\n      static\n    />\n  ))\n  .add(\"LocationField with nearby stops in mobile context\", () => (\n    <LocationField\n      currentPosition={currentPosition}\n      geocoderConfig={geocoderConfig}\n      getCurrentPosition={getCurrentPosition}\n      locationType=\"to\"\n      nearbyStops={nearbyStops}\n      onLocationSelected={onLocationSelected}\n      static\n      stopsIndex={stopsIndex}\n    />\n  ))\n  .add(\"LocationField with session searches in mobile context\", () => (\n    <LocationField\n      currentPosition={currentPosition}\n      geocoderConfig={geocoderConfig}\n      getCurrentPosition={getCurrentPosition}\n      locationType=\"to\"\n      onLocationSelected={onLocationSelected}\n      sessionSearches={sessionSearches}\n      static\n    />\n  ))\n  .add(\"LocationField with user settings in mobile context\", () => (\n    <LocationField\n      currentPosition={currentPosition}\n      geocoderConfig={geocoderConfig}\n      getCurrentPosition={getCurrentPosition}\n      locationType=\"to\"\n      onLocationSelected={onLocationSelected}\n      showUserSettings\n      static\n      userLocationsAndRecentPlaces={userLocationsAndRecentPlaces}\n    />\n  ))\n  .add(\"LocationField in mobile context with custom icons\", () => (\n    <LocationField\n      currentPosition={currentPosition}\n      currentPositionIcon={<Crosshairs size={13} />}\n      currentPositionUnavailableIcon={<SkullCrossbones size={13} />}\n      GeocodedOptionIconComponent={GeocodedOptionIconComponent}\n      geocoderConfig={geocoderConfig}\n      getCurrentPosition={getCurrentPosition}\n      LocationIconComponent={LocationIconComponent}\n      locationType=\"to\"\n      nearbyStops={nearbyStops}\n      onLocationSelected={onLocationSelected}\n      sessionOptionIcon={<Clock size={13} />}\n      sessionSearches={sessionSearches}\n      showUserSettings\n      static\n      stopsIndex={stopsIndex}\n      stopOptionIcon={<MapSigns size={13} />}\n      userLocationsAndRecentPlaces={userLocationsAndRecentPlaces}\n      UserLocationIconComponent={UserLocationIconComponent}\n    />\n  ))\n  .add(\"LocationField no auto-focus with multiple controls\", () => (\n    <div>\n      <input id=\"example\" defaultValue=\"Enter text\" />\n      <button type=\"button\">Click me!</button>\n      <LocationField\n        currentPosition={currentPosition}\n        geocoderConfig={geocoderConfig}\n        getCurrentPosition={getCurrentPosition}\n        inputPlaceholder=\"Select from location\"\n        locationType=\"from\"\n        onLocationSelected={onLocationSelected}\n      />\n    </div>\n  ))\n  .add(\"LocationField auto-focus with multiple controls\", () => (\n    <div>\n      <input id=\"example\" defaultValue=\"Enter text\" />\n      <button type=\"button\">Click me!</button>\n      <LocationField\n        autoFocus\n        currentPosition={currentPosition}\n        geocoderConfig={geocoderConfig}\n        getCurrentPosition={getCurrentPosition}\n        inputPlaceholder=\"Select from location\"\n        locationType=\"from\"\n        onLocationSelected={onLocationSelected}\n      />\n    </div>\n  ));\n"]}