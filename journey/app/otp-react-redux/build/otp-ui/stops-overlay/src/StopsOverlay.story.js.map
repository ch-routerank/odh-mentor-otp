{"version":3,"sources":["StopsOverlay.story.js"],"names":["center","languageConfig","stopViewer","refreshStopsAction","ExampleMarker","stop","propTypes","stopLayerStopType","isRequired","Example","Component","constructor","bounds","stops","mockStops","filter","lat","maxLat","minLat","lon","maxLon","minLon","setState","state","render","StopMarker","props","refreshStops","PropTypes","elementType","defaultProps","CustomMarker","iconHtml","ReactDOMServer","renderToStaticMarkup","name","indexOf","html","className","module","addDecorator","withA11y","withInfo","add"],"mappings":"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","sourcesContent":["import { divIcon } from \"leaflet\";\nimport BaseMap from \"../../base-map/src\";\nimport { stopLayerStopType } from \"../../core-utils/src/types\";\nimport PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport ReactDOMServer from \"react-dom/server\";\nimport { Marker } from \"react-leaflet\";\nimport { action } from \"@storybook/addon-actions\";\nimport { withA11y } from \"@storybook/addon-a11y\";\nimport { withInfo } from \"@storybook/addon-info\";\nimport { storiesOf } from \"@storybook/react\";\nimport { Bus, Subway } from \"styled-icons/fa-solid\";\n\nimport StopsOverlay from \".\";\nimport mockStops from \"../__mocks__/stops.json\";\nimport DefaultStopMarker from \"./stop-marker\";\n\nimport \"../../../node_modules/leaflet/dist/leaflet.css\";\n\nconst center = [45.523092, -122.671202];\nconst languageConfig = { stopViewer: \"View Stop\" };\nconst refreshStopsAction = action(\"refreshStops\");\n\nfunction ExampleMarker({ stop }) {\n  return (\n    <DefaultStopMarker\n      languageConfig={languageConfig}\n      setLocation={action(\"setLocation\")}\n      setViewedStop={action(\"setViewedStop\")}\n      stop={stop}\n    />\n  );\n}\n\nExampleMarker.propTypes = {\n  stop: stopLayerStopType.isRequired\n};\n\nclass Example extends Component {\n  constructor() {\n    super();\n    this.state = {\n      stops: []\n    };\n  }\n\n  refreshStops = bounds => {\n    const stops = mockStops.filter(\n      stop =>\n        stop.lat < bounds.maxLat &&\n        stop.lat > bounds.minLat &&\n        stop.lon < bounds.maxLon &&\n        stop.lon > bounds.minLon\n    );\n    this.setState({ stops });\n    refreshStopsAction();\n  };\n\n  render() {\n    const { StopMarker } = this.props;\n    const { stops } = this.state;\n    return (\n      <BaseMap center={center}>\n        <StopsOverlay\n          name=\"Transit Stops\"\n          refreshStops={this.refreshStops}\n          StopMarker={StopMarker}\n          stops={stops}\n          visible\n        />\n      </BaseMap>\n    );\n  }\n}\n\nExample.propTypes = {\n  StopMarker: PropTypes.elementType\n};\n\nExample.defaultProps = {\n  StopMarker: ExampleMarker\n};\n\nfunction CustomMarker({ stop }) {\n  const iconHtml = ReactDOMServer.renderToStaticMarkup(\n    stop.name.indexOf(\"MAX\") > -1 ? <Subway /> : <Bus color=\"grey\" />\n  );\n  return (\n    <Marker\n      icon={divIcon({ html: iconHtml, className: \"\" })}\n      position={[stop.lat, stop.lon]}\n    />\n  );\n}\n\nCustomMarker.propTypes = {\n  stop: stopLayerStopType.isRequired\n};\n\nstoriesOf(\"StopsOverlay\", module)\n  .addDecorator(withA11y)\n  .addDecorator(withInfo)\n  .add(\"StopsOverlay with default marker\", () => <Example />)\n  .add(\"StopsOverlay with custom marker\", () => (\n    <Example StopMarker={CustomMarker} />\n  ));\n"]}