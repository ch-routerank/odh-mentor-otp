{"version":3,"sources":["index.js"],"names":["Object","defineProperty","exports","value","default","_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_moment","_time2","_ModeButton","Styled","obj","__esModule","_getRequireWildcardCache","WeakMap","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_defineProperty","enumerable","configurable","writable","isInputTypeSupported","type","input","document","createElement","setAttribute","DateTimeSelector","Component","constructor","props","evt","handleQueryParamChange","date","target","time","timeFormatLegacy","format","OTP_API_TIME_FORMAT","dateFormatLegacy","OTP_API_DATE_FORMAT","option","departArrive","isSelected","queryParam","onQueryParamChange","raiseOnQueryParamChange","setState","_date","_time","state","render","className","forceLegacy","style","departureOptions","text","forEach","opt","isLegacy","supportsDateTimeInputs","DepartureRow","map","selected","onClick","setDepartArrive","DateTimeRow","required","onChange","handleTimeChange","handleDateChange","defaultValue","handleTimeTimeChangeLegacy","handleDateChangeLegacy","propTypes","string","oneOf","bool","func","defaultProps","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _time2 = require(\"@opentripplanner/core-utils/lib/time\");\n\nvar _ModeButton = _interopRequireDefault(require(\"../ModeButton\"));\n\nvar Styled = _interopRequireWildcard(require(\"../styled\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * Determines whether the browser supports a particular <input type=<type> /> control,\n * so we can take advantage of native controls\n * (especially date/time selection) on modern (mobile) browsers.\n * @param {*} type One of the HTML5 input types.\n */\nfunction isInputTypeSupported(type) {\n  const input = document.createElement(\"input\");\n  input.setAttribute(\"type\", type);\n  return input.type === type;\n}\n/**\n * The `DateTimeSelector` component lets the OTP user chose a departure or arrival date/time.\n * (The departure can be right now.)\n *\n * There are two rendering modes, a \"normal\" mode and a \"legacy\" mode.\n * - \"Normal\" mode: We try to use `<input type=\"time|date\">` for date and time input.\n *   On current HTML5 browsers (desktop or mobile), these controls\n *   render the date/time according to OS settings and natively offer a user interface\n *   for choosing the date/time.\n *   Thus, when `<input type=\"time|date\">` is supported, there is no need to specify a date/time format.\n *   If not, we fall back to \"legacy\" mode.\n * - \"Legacy\" mode: On Safari for MacOS, and on legacy browsers that don't support `<input type=\"time|date\">`,\n *   `<input type=\"time|date\">` renders as the default `<input type=\"text\">`, and in these conditions,\n *   we have to fall back to formatting the date/time ourselves, using `dateFormatLegacy` and `timeFormatLegacy` props.\n * - Implementers don't know in advance whether the browser supports `<input type=\"time|date\">`.\n *   That determination is performed by method `isInputTypeSupported(type)` above when the constructor is executed.\n *   Therefore, they should provide `dateFormatLegacy` and `timeFormatLegacy` props as a backup.\n *   If these props are not provided, the OTP API date format is used.\n * - For testing purposes, implementers can \"force\" the \"legacy\" mode by setting the `forceLegacy` prop to true.\n */\n\n\nclass DateTimeSelector extends _react.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"supportsDateTimeInputs\", isInputTypeSupported(\"date\") && isInputTypeSupported(\"time\"));\n\n    _defineProperty(this, \"handleDateChange\", evt => {\n      this.handleQueryParamChange({\n        date: evt.target.value\n      });\n    });\n\n    _defineProperty(this, \"handleTimeChange\", evt => {\n      this.handleQueryParamChange({\n        time: evt.target.value\n      });\n    });\n\n    _defineProperty(this, \"handleTimeTimeChangeLegacy\", evt => {\n      const {\n        timeFormatLegacy\n      } = this.props;\n      const time = (0, _moment.default)(evt.target.value, timeFormatLegacy).format(_time2.OTP_API_TIME_FORMAT);\n      this.handleQueryParamChange({\n        time\n      });\n    });\n\n    _defineProperty(this, \"handleDateChangeLegacy\", evt => {\n      const {\n        dateFormatLegacy\n      } = this.props;\n      const date = (0, _moment.default)(evt.target.value, dateFormatLegacy).format(_time2.OTP_API_DATE_FORMAT);\n      this.handleQueryParamChange({\n        date\n      });\n    });\n\n    _defineProperty(this, \"setDepartArrive\", option => {\n      if (option.type === \"NOW\") {\n        this.handleQueryParamChange({\n          departArrive: \"NOW\",\n          date: (0, _moment.default)().format(_time2.OTP_API_DATE_FORMAT),\n          time: (0, _moment.default)().format(_time2.OTP_API_TIME_FORMAT)\n        });\n      } else if (!option.isSelected) {\n        this.handleQueryParamChange({\n          departArrive: option.type // TODO: add the depart/arrive date and time to the new state.\n\n        });\n      }\n    });\n\n    _defineProperty(this, \"raiseOnQueryParamChange\", queryParam => {\n      const {\n        onQueryParamChange\n      } = this.props;\n\n      if (typeof onQueryParamChange === \"function\") {\n        onQueryParamChange(queryParam);\n      }\n    });\n\n    _defineProperty(this, \"handleQueryParamChange\", queryParam => {\n      this.raiseOnQueryParamChange(queryParam);\n      this.setState({ ...queryParam\n      });\n    });\n\n    const {\n      date: _date,\n      time: _time,\n      departArrive\n    } = props;\n    this.state = {\n      date: _date,\n      time: _time,\n      departArrive\n    };\n  }\n\n  render() {\n    // console.log(`supports date time: ${this.supportsDateTimeInputs}`);\n    const {\n      className,\n      dateFormatLegacy = _time2.OTP_API_DATE_FORMAT,\n      forceLegacy,\n      timeFormatLegacy = _time2.OTP_API_TIME_FORMAT,\n      style\n    } = this.props;\n    const {\n      departArrive,\n      date,\n      time\n    } = this.state;\n    const departureOptions = [{\n      // Default option.\n      type: \"NOW\",\n      text: \"$_now_$\"\n    }, {\n      type: \"DEPART\",\n      text: \"$_depart_at_$\"\n    }, {\n      type: \"ARRIVE\",\n      text: \"$_arrive_at_$\"\n    }];\n    departureOptions.forEach(opt => {\n      opt.isSelected = departArrive === opt.type;\n    });\n    const isLegacy = forceLegacy || !this.supportsDateTimeInputs;\n    return /*#__PURE__*/_react.default.createElement(Styled.DateTimeSelector, {\n      className: className,\n      style: style\n    }, /*#__PURE__*/_react.default.createElement(Styled.DateTimeSelector.DepartureRow, null, departureOptions.map(opt => /*#__PURE__*/_react.default.createElement(_ModeButton.default, {\n      key: opt.type,\n      selected: opt.isSelected,\n      onClick: () => this.setDepartArrive(opt)\n    }, opt.text))), departArrive !== \"NOW\" && !isLegacy && /*#__PURE__*/_react.default.createElement(Styled.DateTimeSelector.DateTimeRow, null, /*#__PURE__*/_react.default.createElement(\"div\", null, /*#__PURE__*/_react.default.createElement(\"input\", {\n      type: \"time\",\n      value: time,\n      required: true,\n      onChange: this.handleTimeChange\n    })), /*#__PURE__*/_react.default.createElement(\"div\", null, /*#__PURE__*/_react.default.createElement(\"input\", {\n      type: \"date\",\n      value: date,\n      required: true,\n      onChange: this.handleDateChange\n    }))), departArrive !== \"NOW\" && isLegacy && /*#__PURE__*/_react.default.createElement(Styled.DateTimeSelector.DateTimeRow, null, /*#__PURE__*/_react.default.createElement(\"div\", null, /*#__PURE__*/_react.default.createElement(\"input\", {\n      type: \"text\",\n      defaultValue: (0, _moment.default)(time, _time2.OTP_API_TIME_FORMAT).format(timeFormatLegacy),\n      required: true,\n      onChange: this.handleTimeTimeChangeLegacy\n    })), /*#__PURE__*/_react.default.createElement(\"div\", null, /*#__PURE__*/_react.default.createElement(\"input\", {\n      type: \"text\",\n      defaultValue: (0, _moment.default)(date, _time2.OTP_API_DATE_FORMAT).format(dateFormatLegacy),\n      required: true,\n      onChange: this.handleDateChangeLegacy\n    }))));\n  }\n\n}\n\nDateTimeSelector.propTypes = {\n  /**\n   * The CSS class name to apply to this element.\n   */\n  className: _propTypes.default.string,\n\n  /**\n   * The initial departure/arrival date string, in a format that an HTML <input type=\"date\"> control can render.\n   */\n  date: _propTypes.default.string,\n\n  /**\n   * The date format string for legacy mode (on legacy browsers, or if `forceLegacy` is true).\n   */\n  dateFormatLegacy: _propTypes.default.string,\n\n  /**\n   * The initial setting determining whether a trip should start or end at a given time.\n   */\n  departArrive: _propTypes.default.oneOf([\"NOW\", \"DEPART\", \"ARRIVE\"]),\n\n  /**\n   * If true, forces legacy mode and uses `<input type=\"text\">`\n   * instead of the native date/time pickers found on modern browsers.\n   */\n  forceLegacy: _propTypes.default.bool,\n\n  /**\n   * The initial departure/arrival time string, in a format that an HTML <input type=\"time\"> control can render.\n   */\n  time: _propTypes.default.string,\n\n  /**\n   * The time format string for legacy mode (on legacy browsers, or if `forceLegacy` is true).\n   */\n  timeFormatLegacy: _propTypes.default.string,\n\n  /**\n   * Triggered when a query parameter is changed.\n   * @param params A { param1: value1, param2, value2, ... } object that contains the new values for the parameter(s) that has (have) changed.\n   */\n  onQueryParamChange: _propTypes.default.func\n};\nDateTimeSelector.defaultProps = {\n  className: null,\n  date: null,\n  dateFormatLegacy: null,\n  departArrive: \"NOW\",\n  forceLegacy: false,\n  time: null,\n  timeFormatLegacy: null,\n  onQueryParamChange: null\n};\nvar _default = DateTimeSelector;\nexports.default = _default;\n"]}