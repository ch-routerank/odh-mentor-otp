{"version":3,"sources":["VehicleRentalOverlay.story.js"],"names":["center","bikeMapSymbols","dockStrokeColor","fillColor","maxZoom","minZoom","pixels","type","carMapSymbols","configCompanies","id","label","modes","EScooterMapSymbols","strokeColor","setLocation","ZoomControlledMapWithVehicleRentalOverlay","Component","constructor","zoom","stateZoom","state","setState","render","companies","getStationName","mapSymbols","refreshVehicles","stations","props","onViewportChanged","propTypes","PropTypes","arrayOf","string","isRequired","func","vehicleRentalMapOverlaySymbolsType","stationType","defaultProps","undefined","customStationName","_","station","module","addDecorator","withA11y","withInfo","add","bikeRentalStations","carRentalStations","eScooterStations"],"mappings":"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","sourcesContent":["import BaseMap from \"@opentripplanner/base-map\";\nimport {\n  vehicleRentalMapOverlaySymbolsType,\n  stationType\n} from \"@opentripplanner/core-utils/lib/types\";\nimport PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport { action } from \"@storybook/addon-actions\";\nimport { withA11y } from \"@storybook/addon-a11y\";\nimport { withInfo } from \"@storybook/addon-info\";\nimport { storiesOf } from \"@storybook/react\";\n\nimport VehicleRentalOverlay from \".\";\nimport bikeRentalStations from \"../__mocks__/bike-rental-stations.json\";\nimport carRentalStations from \"../__mocks__/car-rental-stations.json\";\nimport eScooterStations from \"../__mocks__/e-scooter-rental-stations.json\";\n\nimport \"../../../node_modules/leaflet/dist/leaflet.css\";\n\nconst center = [45.518092, -122.671202];\n\nconst bikeMapSymbols = [\n  {\n    dockStrokeColor: \"#000000\",\n    fillColor: \"#FF2E28\",\n    maxZoom: 13,\n    minZoom: 0,\n    pixels: 4,\n    type: \"circle\"\n  },\n  {\n    dockStrokeColor: \"#000000\",\n    fillColor: \"#FF2E28\",\n    maxZoom: 17,\n    minZoom: 14,\n    pixels: 6,\n    type: \"circle\"\n  },\n  {\n    maxZoom: 999,\n    minZoom: 18,\n    type: \"hubAndFloatingBike\"\n  }\n];\nconst carMapSymbols = [\n  {\n    fillColor: \"#009cde\",\n    maxZoom: 13,\n    minZoom: 0,\n    pixels: 4,\n    type: \"circle\"\n  },\n  {\n    fillColor: \"#009cde\",\n    maxZoom: 17,\n    minZoom: 14,\n    pixels: 6,\n    type: \"circle\"\n  },\n  {\n    fillColor: \"#009cde\",\n    maxZoom: 999,\n    minZoom: 18,\n    type: \"marker\"\n  }\n];\nconst configCompanies = [\n  {\n    id: \"BIKETOWN\",\n    label: \"Biketown\",\n    modes: \"BICYCLE_RENT\"\n  },\n  {\n    id: \"CAR2GO\",\n    label: \"car2go\",\n    modes: \"CAR_RENT\"\n  },\n  {\n    id: \"RAZOR\",\n    label: \"Razor\",\n    modes: \"MICROMOBILITY_RENT\"\n  },\n  {\n    id: \"SHARED\",\n    label: \"Shared\",\n    modes: \"MICROMOBILITY_RENT\"\n  }\n];\nconst EScooterMapSymbols = [\n  {\n    fillColor: \"#F80600\",\n    maxZoom: 13,\n    minZoom: 0,\n    pixels: 4,\n    strokeColor: \"#CCCCCC\",\n    type: \"circle\"\n  },\n  {\n    fillColor: \"#F80600\",\n    maxZoom: 17,\n    minZoom: 14,\n    pixels: 6,\n    strokeColor: \"#CCCCCC\",\n    type: \"circle\"\n  },\n  {\n    fillColor: \"#F80600\",\n    maxZoom: 999,\n    minZoom: 18,\n    type: \"marker\"\n  }\n];\nconst setLocation = action(\"setLocation\");\n\nclass ZoomControlledMapWithVehicleRentalOverlay extends Component {\n  constructor() {\n    super();\n    this.state = { zoom: 13 };\n  }\n\n  onViewportChanged = ({ zoom }) => {\n    const { zoom: stateZoom } = this.state;\n    if (zoom !== stateZoom) {\n      this.setState({ zoom });\n    }\n  };\n\n  render() {\n    const {\n      companies,\n      getStationName,\n      mapSymbols,\n      refreshVehicles,\n      stations\n    } = this.props;\n    const { zoom } = this.state;\n    return (\n      <BaseMap\n        center={center}\n        onViewportChanged={this.onViewportChanged}\n        zoom={zoom}\n      >\n        <VehicleRentalOverlay\n          configCompanies={configCompanies}\n          companies={companies}\n          getStationName={getStationName}\n          setLocation={setLocation}\n          mapSymbols={mapSymbols}\n          refreshVehicles={refreshVehicles}\n          stations={stations}\n          visible\n          zoom={zoom}\n        />\n      </BaseMap>\n    );\n  }\n}\n\nZoomControlledMapWithVehicleRentalOverlay.propTypes = {\n  companies: PropTypes.arrayOf(PropTypes.string.isRequired),\n  getStationName: PropTypes.func,\n  mapSymbols: vehicleRentalMapOverlaySymbolsType.isRequired,\n  refreshVehicles: PropTypes.func.isRequired,\n  stations: PropTypes.arrayOf(stationType.isRequired).isRequired\n};\n\nZoomControlledMapWithVehicleRentalOverlay.defaultProps = {\n  companies: null,\n  getStationName: undefined\n};\n\nfunction customStationName(_, station) {\n  return `ðŸ›´ (ID: ${station.id})`;\n}\n\nstoriesOf(\"VehicleRentalOverlay\", module)\n  .addDecorator(withA11y)\n  .addDecorator(withInfo)\n  .add(\"VehicleRentalOverlay with rental bicycles\", () => (\n    <ZoomControlledMapWithVehicleRentalOverlay\n      companies={[\"BIKETOWN\"]}\n      mapSymbols={bikeMapSymbols}\n      refreshVehicles={action(\"refresh bicycles\")}\n      stations={bikeRentalStations}\n    />\n  ))\n  .add(\"VehicleRentalOverlay with rental cars\", () => (\n    <ZoomControlledMapWithVehicleRentalOverlay\n      companies={[\"CAR2GO\"]}\n      mapSymbols={carMapSymbols}\n      refreshVehicles={action(\"refresh cars\")}\n      stations={carRentalStations}\n    />\n  ))\n  .add(\"VehicleRentalOverlay with rental E-scooters\", () => (\n    <ZoomControlledMapWithVehicleRentalOverlay\n      companies={[\"SHARED\"]}\n      mapSymbols={EScooterMapSymbols}\n      refreshVehicles={action(\"refresh E-scooters\")}\n      stations={eScooterStations}\n    />\n  ))\n  .add(\"VehicleRentalOverlay with rental E-scooters with custom naming\", () => (\n    <ZoomControlledMapWithVehicleRentalOverlay\n      companies={[\"SHARED\"]}\n      getStationName={customStationName}\n      mapSymbols={EScooterMapSymbols}\n      refreshVehicles={action(\"refresh E-scooters\")}\n      stations={eScooterStations}\n    />\n  ));\n"]}