{"version":3,"sources":["batch-routing-panel.js"],"names":["BatchRoutingPanel","props","currentQuery","routingQuery","issues","push","length","window","alert","join","activeSearch","itineraryFooter","LegIcon","mobile","showUserSettings","actionText","display","justifyContent","flexDirection","alignItems","height","width","margin","marginRight","fontSize","textAlign","_planTrip","marginLeft","backgroundColor","position","top","right","left","bottom","Component","mapStateToProps","state","ownProps","otp","expandAdvanced","user","mapDispatchToProps","apiActions"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Button } from 'react-bootstrap'\nimport { connect } from 'react-redux'\n\nimport * as apiActions from '../../actions/api'\nimport LocationField from '../form/connected-location-field'\nimport UserSettings from '../form/user-settings'\nimport Icon from '../narrative/icon'\nimport NarrativeItineraries from '../narrative/narrative-itineraries'\nimport { hasValidLocation, getActiveSearch, getShowUserSettings } from '../../util/state'\nimport ViewerContainer from '../viewers/viewer-container'\n\n/**\n * Main panel for the batch/trip comparison form.\n * @extends Component\n */\nclass BatchRoutingPanel extends Component {\n  _planTrip = () => {\n    const {currentQuery, routingQuery} = this.props\n    const issues = []\n    if (!hasValidLocation(currentQuery, 'from')) issues.push('from')\n    if (!hasValidLocation(currentQuery, 'to')) issues.push('to')\n    if (issues.length > 0) {\n      // TODO: replace with less obtrusive validation.\n      window.alert(`Please define the following fields to Viaggia: ${issues.join(', ')}`)\n      return\n    }\n    routingQuery()\n  }\n\n  render () {\n    const {\n      activeSearch,\n      itineraryFooter,\n      LegIcon,\n      mobile,\n      showUserSettings\n    } = this.props\n    const actionText = mobile ? 'tappa' : 'clicca'\n    return (\n      <ViewerContainer>\n        <LocationField\n          inputPlaceholder={`Inserisci partenza o ${actionText} su mappa...`}\n          locationType='from'\n          showClearButton\n        />\n        <LocationField\n          inputPlaceholder={`Inserisci destinazione o ${actionText} su mappa...`}\n          locationType='to'\n          showClearButton={!mobile}\n        />\n        <div style={{\n          display: 'flex',\n          justifyContent: 'flex-start',\n          flexDirection: 'row',\n          alignItems: 'center'\n        }} className='comparison-form'>\n          <button\n            style={{\n              height: '50px',\n              width: '50px',\n              margin: '0px',\n              marginRight: '5px'\n            }}\n          >\n            <Icon type='cog' className='fa-2x' />\n          </button>\n          <button\n            style={{\n              height: '50px',\n              width: '100px',\n              margin: '0px',\n              fontSize: 'small',\n              textAlign: 'left'\n            }}\n          >\n            <Icon type='calendar' /> Today<br />\n            <Icon type='clock-o' /> Now<br />\n          </button>\n          <Button\n            bsStyle='default'\n            bsSize='small'\n            onClick={this._planTrip}\n            style={{\n              height: '50px',\n              width: '50px',\n              margin: '0px',\n              marginLeft: 'auto',\n              backgroundColor: '#F5F5A7'\n            }} >\n            <Icon type='search' className='fa-2x' />\n          </Button>\n        </div>\n        {!activeSearch && showUserSettings &&\n          <UserSettings />\n        }\n        <div className='desktop-narrative-container'>\n          <NarrativeItineraries\n            containerStyle={{\n              display: 'flex',\n              flexDirection: 'column',\n              position: 'absolute',\n              top: '218px', // This is variable dependent on height of the form above.\n              right: '0',\n              left: '0',\n              bottom: '0'\n            }}\n            itineraryFooter={itineraryFooter}\n            LegIcon={LegIcon}\n          />\n        </div>\n      </ViewerContainer>\n    )\n  }\n}\n\n// connect to the redux store\nconst mapStateToProps = (state, ownProps) => {\n  const showUserSettings = getShowUserSettings(state.otp)\n  return {\n    activeSearch: getActiveSearch(state.otp),\n    currentQuery: state.otp.currentQuery,\n    expandAdvanced: state.otp.user.expandAdvanced,\n    showUserSettings\n  }\n}\n\nconst mapDispatchToProps = {\n  routingQuery: apiActions.routingQuery\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BatchRoutingPanel)\n"]}