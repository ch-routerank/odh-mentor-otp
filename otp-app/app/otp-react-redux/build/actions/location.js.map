{"version":3,"sources":["location.js"],"names":["receivedPositionError","fetchingPosition","receivedPositionResponse","getCurrentPosition","setAsType","onSuccess","dispatch","getState","navigator","geolocation","type","position","console","log","locationType","error","message","enableHighAccuracy","addLocationSearch"],"mappings":";;;;;;;;;;;;;;AAAA;;AAEA;;;;;;AAEO,IAAMA,qBAAqB,GAAG,gCAAa,gBAAb,CAA9B;;AACA,IAAMC,gBAAgB,GAAG,gCAAa,mBAAb,CAAzB;;AACA,IAAMC,wBAAwB,GAAG,gCAAa,mBAAb,CAAjC;;;AAEA,SAASC,kBAAT,GAA0D;AAAA,MAA7BC,SAA6B,uEAAjB,IAAiB;AAAA,MAAXC,SAAW;AAC/D;AAAA,uEAAO,iBAAgBC,QAAhB,EAA0BC,QAA1B;AAAA;AAAA;AAAA;AAAA;AACL,kBAAIC,SAAS,CAACC,WAAd,EAA2B;AACzBH,gBAAAA,QAAQ,CAACL,gBAAgB,CAAC;AAAES,kBAAAA,IAAI,EAAEN;AAAR,iBAAD,CAAjB,CAAR;AACAI,gBAAAA,SAAS,CAACC,WAAV,CAAsBN,kBAAtB,EACE;AACA,0BAAAQ,QAAQ,EAAI;AACV,sBAAIA,QAAJ,EAAc;AACZC,oBAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BF,QAA3B,EAAqCP,SAArC;AACAE,oBAAAA,QAAQ,CAACJ,wBAAwB,CAAC;AAAES,sBAAAA,QAAQ,EAARA;AAAF,qBAAD,CAAzB,CAAR;;AACA,wBAAIP,SAAJ,EAAe;AACbQ,sBAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ;AACAP,sBAAAA,QAAQ,CAAC,+BAAqB;AAAEQ,wBAAAA,YAAY,EAAEV;AAAhB,uBAArB,CAAD,CAAR;AACAC,sBAAAA,SAAS,IAAIA,SAAS,EAAtB;AACD;AACF,mBARD,MAQO;AACLC,oBAAAA,QAAQ,CAACN,qBAAqB,CAAC;AAAEe,sBAAAA,KAAK,EAAE;AAAEC,wBAAAA,OAAO,EAAE;AAAX;AAAT,qBAAD,CAAtB,CAAR;AACD;AACF,iBAdH,EAeE;AACA,0BAAAD,KAAK,EAAI;AACPH,kBAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA8CE,KAA9C;AACAT,kBAAAA,QAAQ,CAACN,qBAAqB,CAAC;AAAEe,oBAAAA,KAAK,EAALA;AAAF,mBAAD,CAAtB,CAAR;AACD,iBAnBH,EAoBE;AACA;AAAEE,kBAAAA,kBAAkB,EAAE;AAAtB,iBArBF;AAuBD,eAzBD,MAyBO;AACLL,gBAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AACAP,gBAAAA,QAAQ,CAACN,qBAAqB,CAAC;AAAEe,kBAAAA,KAAK,EAAE;AAAEC,oBAAAA,OAAO,EAAE;AAAX;AAAT,iBAAD,CAAtB,CAAR;AACD;;AA7BI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;;AAAA;AAAA;AAAA;AAAA;AA+BD;;AAEM,IAAME,iBAAiB,GAAG,gCAAa,qBAAb,CAA1B","sourcesContent":["import { createAction } from 'redux-actions'\n\nimport { setLocationToCurrent } from './map'\n\nexport const receivedPositionError = createAction('POSITION_ERROR')\nexport const fetchingPosition = createAction('POSITION_FETCHING')\nexport const receivedPositionResponse = createAction('POSITION_RESPONSE')\n\nexport function getCurrentPosition (setAsType = null, onSuccess) {\n  return async function (dispatch, getState) {\n    if (navigator.geolocation) {\n      dispatch(fetchingPosition({ type: setAsType }))\n      navigator.geolocation.getCurrentPosition(\n        // On success\n        position => {\n          if (position) {\n            console.log('current loc', position, setAsType)\n            dispatch(receivedPositionResponse({ position }))\n            if (setAsType) {\n              console.log('setting location to current position')\n              dispatch(setLocationToCurrent({ locationType: setAsType }))\n              onSuccess && onSuccess()\n            }\n          } else {\n            dispatch(receivedPositionError({ error: { message: 'Unknown error getting position' } }))\n          }\n        },\n        // On error\n        error => {\n          console.log('error getting current position', error)\n          dispatch(receivedPositionError({ error }))\n        },\n        // Options\n        { enableHighAccuracy: true }\n      )\n    } else {\n      console.log('current position not supported')\n      dispatch(receivedPositionError({ error: { message: 'Geolocation not supported by your browser' } }))\n    }\n  }\n}\n\nexport const addLocationSearch = createAction('ADD_LOCATION_SEARCH')\n"]}